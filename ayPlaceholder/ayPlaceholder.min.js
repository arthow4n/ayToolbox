angular.module("ayPlaceholder",[]).directive("phIt",function(){return{restrict:"A",scope:{argstr:"@phIt"},link:function(k,l,v){var p=/(\.(?:jpg|jpeg|gif|png))(?=\?text=)?/,u=/^(?:(\d+)(?:x(\d+)?)?(?:\/((?:[0-9A-Fa-f]{3})?(?:[0-9A-Fa-f]{3})?))?(?:\/((?:[0-9A-Fa-f]{3})?(?:[0-9A-Fa-f]{3})?))?\/?(?:\?text=(.+)?)?)$/,g,h,d,e,a,b,q,r,m,n;k.$watch("argstr",function(){if(angular.isDefined(k.argstr))if(h=k.argstr,e=(e=h.match(p))?e[1].slice(1):"jpeg","jpg"===e&&(e="jpeg"),e&&(h=h.replace(p,"")),d=h.match(u)){a=
d[1];b=d[2]||d[1];q="#"+(d[3]||"CCC");r="#"+(d[4]||"777");m=d[5]||a+"x"+b;g=g||document.createElement("canvas");g.width=a;g.height=b;var c=g.getContext("2d");c.fillStyle=q;c.fillRect(0,0,a,b);c.fillStyle=r;var f=24;f>b&&(f=b-1);f>a&&(f=a-1);c.font=f+"px monospace";c.textAlign="center";c.textBaseline="middle";var f=c.measureText(m),t=a;f.width>a&&b<a&&(t=b,c.translate(a/2,b/2),c.rotate(-90*Math.PI/180),c.translate(-a/2,-b/2));c.fillText(m,a/2,b/2,t);n=g.toDataURL("image/"+e);"IMG"===l.prop("tagName")?
l.prop("src",n):l.css("background-image","url('"+n+"')")}else console.error("Expected placehold.it-like syntax ( '000x000.png/bgColor/textColor?text=foobar' )")})}}});