angular.module("ayPlaceholder",[]).directive("phIt",function(){return{restrict:"A",scope:{argstr:"@phIt"},link:function(k,l,v){var p=/(\.(?:jpg|jpeg|gif|png))(?=\?text=)?/,u=/^(?:(\d+)(?:x(\d+)?)?(?:\/((?:[0-9A-Fa-f]{3})?(?:[0-9A-Fa-f]{3})?))?(?:\/((?:[0-9A-Fa-f]{3})?(?:[0-9A-Fa-f]{3})?))?\/?(?:\?text=(.+)?)?)$/,f,h,g,d,a,b,q,r,m,n;k.$watch("argstr",function(){if(angular.isDefined(k.argstr))if(h=k.argstr,d=(d=h.match(p))?d[1].slice(1):"jpeg","jpg"===d&&(d="jpeg"),d&&(h=h.replace(p,"")),g=h.match(u)){a=
parseInt(g[1],10);b=parseInt(g[2],10)||a;q="#"+(g[3]||"CCC");r="#"+(g[4]||"777");m=g[5]||a+"x"+b;f=f||document.createElement("canvas");f.width=a;f.height=b;var c=f.getContext("2d");c.fillStyle=q;c.fillRect(0,0,a,b);c.fillStyle=r;var e=24;e>b&&(e=b-1);e>a&&(e=a-1);c.font=e+"px monospace";c.textAlign="center";c.textBaseline="middle";var e=c.measureText(m),t=a;e.width>a&&b>a&&(t=b,c.translate(a/2,b/2),c.rotate(-90*Math.PI/180),c.translate(-a/2,-b/2));c.fillText(m,a/2,b/2,t);n=f.toDataURL("image/"+d);
"IMG"===l.prop("tagName")?l.prop("src",n):l.css("background-image","url('"+n+"')")}else console.error("Expected placehold.it-like syntax ( '000x000.png/bgColor/textColor?text=foobar' )")})}}});