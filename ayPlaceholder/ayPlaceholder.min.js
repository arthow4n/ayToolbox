angular.module("ayPlaceholder",[]).directive("phIt",function(){return{restrict:"A",scope:{argstr:"@phIt"},link:function(l,m,u){var p=/(\.(?:jpg|jpeg|gif|png))(?=\?text=)?/,t=/^(?:(\d+)(?:x(\d+)?)?(?:\/((?:[0-9A-Fa-f]{3})?(?:[0-9A-Fa-f]{3})?))?(?:\/((?:[0-9A-Fa-f]{3})?(?:[0-9A-Fa-f]{3})?))?\/?(?:\?text=(.+)?)?)$/,f,g,d,e,c,b,q,r,h,n;l.$watch("argstr",function(){if(angular.isDefined(l.argstr))if(g=l.argstr,e=(e=g.match(p))?e[1].slice(1):"jpeg","jpg"===e&&(e="jpeg"),e&&(g=g.replace(p,"")),d=g.match(t)){c=
d[1];b=d[2]||d[1];q="#"+(d[3]||"CCC");r="#"+(d[4]||"777");h=d[5]||c+"x"+b;f=f||document.createElement("canvas");f.width=c;f.height=b;var a=f.getContext("2d");a.fillStyle=q;a.fillRect(0,0,c,b);a.fillStyle=r;a.font=b/8+"px monospace";a.textAlign="center";a.textBaseline="middle";var k=a.measureText(h);k.width>c&&(k.width<b?(a.translate(c/2,b/2),a.rotate(-90*Math.PI/180),a.translate(-c/2,-b/2)):(h="!"+c+"x"+b,k=a.measureText(h),k.width>c&&k.width<b&&(a.translate(c/2,b/2),a.rotate(-90*Math.PI/180),a.translate(-c/
2,-b/2))));a.fillText(h,c/2,b/2);n=f.toDataURL("image/"+e);"IMG"===m.prop("tagName")?m.prop("src",n):m.css("background-image","url('"+n+"')")}else console.error("Expected placehold.it-like syntax ( '000x000.png/bgColor/textColor?text=foobar' )")})}}});